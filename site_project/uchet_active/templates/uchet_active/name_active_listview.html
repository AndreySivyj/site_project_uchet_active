{% extends "uchet_active/listview.html" %}
{% load has_group %}
{% load widget_tweaks %}


{% block buttons %}
    {% if request.user|has_group:user_group_admin or request.user|has_group:user_group_staf %}

        <div class="row mx-auto my-1 my-sm-1 my-lg-1 p-1">
            <div class="col-3 align-self-center">
                <a class="btn btn-sm btn-success" href="{% url 'uchet_active:name_active_create' %}" role="button">Добавить новую запись</a>
            </div>
            
        </div>

    {% endif %}    
{% endblock buttons %}

{% block table %}
            <table class="table table-striped table-hover table-bordered border-primary text-center">
                <thead class="table-primary">
                    {% comment %} <tr class="title_table"><th colspan="4">{{ title_text }}, [всего: {{ count_dataset }}]</th></tr> {% endcomment %}
                    <tr>
                        <th class="idClass" scope="col">id (ссылка)</th>
                        <th scope="col">Тип актива (ссылка)</th>
                        <th scope="col">Производитель</th>
                        <th scope="col">Модель</th>
                        
                        {% if request.user|has_group:user_group_admin or request.user|has_group:user_group_staf %}
                            <th scope="col">Операции над записью</th>
                        {% endif %}
                    </tr>
                </thead>
                <thead class="table-secondary">
                    <tr>
                        <form method="GET" action="" class="form-inline"><!-- class="popup" -->
                            {% csrf_token %}
                            <th>
                                {% comment %} <div class="row" style="margin: 3px;">
                                    {% render_field filter.form.id   %}
                                </div> {% endcomment %}
                            </th>        
                            <th>
                                {% comment %} <div class="row mx-auto" > {% endcomment %}
                                    {% render_field filter.form.type_active   class="form-conrol" %}<!--  -->
                                {% comment %} </div> {% endcomment %}
                            </th>
                            <th>
                                <div class="row mx-auto" >
                                    {% render_field filter.form.manufacturer   class="form-conrol" %}<!--  -->
                                </div>
                            </th>
                            <th>
                                <div class="row mx-auto" >
                                    {% render_field filter.form.name_model   class="form-conrol" %}<!--  -->
                                </div>
                            </th>                            
                            <th>
                                <button type="submit" class="btn btn-sm btn-info" >Фильтровать</button>
                                <a class="btn btn-sm btn-secondary" href="{% url url_return_to_the_list_view %}" role="button">Очистить</a>                                
                            </th>                            
                        </form>
                    </tr>
                </thead>
                <tbody>
                    {% for data in dataset %}
                        <tr>
                            <th class="idClass" scope="row">
                                <div class="d-grid gap-2">
                                    <a class="btn btn-sm btn-outline-primary" href="{{ data.get_absolute_url }}" role="button">{{ data.id }}</a>
                                </div>
                            </th>
                            <td>
                                <div class="d-grid gap-2">
                                    <a class="btn btn-sm btn-outline-primary" href="{{ data.type_active.get_absolute_url }}" role="button">{{ data.type_active }}</a>
                                </div>
                            </td>
                            <td>{{ data.manufacturer }}</td>
                            <td>{{ data.name_model }}</td>

                            {% if request.user|has_group:user_group_admin or request.user|has_group:user_group_staf %}
                                <td>
                                    <a class="btn btn-sm btn-warning" href="{% url url_update_view id=data.id %}">Изменить</a>
                                    <a class="btn btn-sm btn-danger" href="{% url url_delete_view id=data.id %}">Удалить</a>
                                </td>
                            {% endif %}
                        </tr>                    
                    {% endfor %}
                </tbody>
            </table>
{% endblock table %}

{% block scripts %}
<script>    
    $("#id_type_active").select2({ width:'100%'});    
</script>
{% endblock scripts %}